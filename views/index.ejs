<% layout('layout') -%>

<h1>All Posts</h1>

<% if (posts.length === 0) { %>
  <p>No posts yet.</p>
<% } %>

<div class="posts">
  <% posts.forEach(p => { %>
    <div class="post-card">
      <h2><%= p.title %></h2>
      <p class="meta">by <%= p.author ? p.author.name : 'Unknown' %> ‚Ä¢ <%= new Date(p.createdAt).toLocaleString() %></p>
      <p><%= p.content.length > 200 ? p.content.slice(0,200) + '...' : p.content %></p>
      <div class="post-stats">
        <span>‚ù§Ô∏è <%= p.likesCount %></span>
        <span>üí¨ <%= p.commentsCount %></span>
        <a href="/posts/<%= p.id %>">Read more</a>
      </div>
    </div>
  <% }) %>
</div>
